# Memo Fedora

Toujours afficher le menu Grub 2 au démarrage:

    $ sudo grub2-editenv - unset menu_auto_hide

Ajouter un DNS global:


DNS global systemd resolved:

    $ mkdir -p /etc/systemd/resolved.conf.d
    $ vim /etc/systemd/resolved.conf.d/00-custom.conf

    [Resolve]
    DNS=192.168.123.123

    $ systemctl restart systemd-resolved
    $ systemctl status systemd-resolved # Vérifier les erreurs au démarrage

Utiliser ce DNS pour un domaine uniquement:

    [Resolve]
    DNS=192.168.123.123
    Domains=~company.local  # Attention, ne pas utiliser .local si possible, utiliser .net par exemple

Utiliser éventuellement des options: 

    [Resolve]
    DNS=192.168.123.123
    Domains=~company.net
    DNSSEC=no
    DNSOverTLS=no

Vérifier les DNS utilisés:

    $ cat /etc/systemd/resolve/resolv.conf
    $ resolvectl status

Désactiver toutes les gestions d'alimentation:

    $ vim /etc/systemd/sleep.conf

    [Sleep]
    AllowSuspend=no
    AllowHibernation=no
    AllowSuspendThenHibernate=no
    AllowHybridSleep=no

Date/heure format personnalisé: 

     %H:%M %d/%m/%Y

Adresse IP statique NetworkManager:

    $ nmcli con show
    $ sudo nmcli con mod "Wired connection 1" \
        ipv4.addresses "192.168.1.4/24" \
        ipv4.gateway "192.168.1.254" \
        ipv4.dns "192.168.1.254,80.67.169.12" \
        ipv4.method "manual"
    $ sudo nmcli con up "Wired connection 1"

Adresse IP statique avec systemd-networkd (non activé par défaut sur Fedora Desktop, utiliser plutôt NetworkManager):

    $ sudo vim /etc/systemd/network/00-ethernet.network

    [Match]
    Name=eno1
    
    [Network]
    DHCP=no
    Address=192.168.1.4/24
    Gateway=192.168.1.254
    DNS=80.67.169.12
    DNS=80.67.169.40

    $ sudo systemctl restart systemd-networkd
    $ networkctl status

